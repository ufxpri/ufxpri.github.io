ssl tls 기본

ssl 보안 소켓 계층
tls 전송 계층 보안

유저는 https 에 접속함. 로드벨런서는 ce2 로 http 통신을 함. 이렇게 하면 외부에는 안전한 프로토콜만 보임

ACM (AWS Certificate Manager) 를 사용하여 인증서를 관리함 x.509 인증서


SNI (Server Name Indication)
하나의 웹 서버에서 여러개의 SSL 인증서를 사용하는 상황을 해결해줌
새로운 프로토콜이고 SSL handshake 단계에서 결정됨
서버는 이때 알맞는 인증서 또는 기본 인증서를 반환함

ALB & NLB, CloudFront 에서만 지원함

클래식 로드벨런서는 1개 인증서만 가질 수 있음


connection draining 
등록 취소. ELB 에 등록된 인스턴스중 드레이닝 단계에 들어가면 새로운 연결을 중단하고 기존 연결이 사라지도록 기다린다. 이것을 connection draining 이라고 한다.

기본은 300초 이다. 비활성화 될 수 있다.


Auto Scaling group
웹사이트의 요청되는 성능은 계속 변경된다. 이를 충족하기 위해 인스턴스를 생성하는 등의 행위를 할 수 있다.
- 스케일 아웃
- 스케일 인
- 최소 또는 최대의 인스턴스를 가지고 있는것을 보장
- 자동으로 새 인스턴스 로드벨런서에 등록
- 건강하지 않은 인스턴스 재생성
무료!

1. 최소 용량 설정
2. 최대 용량 설정
3. 목표 용량 설정

로드벨런서와도 동작한다.

launch template 란 것을 설정해야 한다.

cloud watch 를 기반으로 ASG 를 조절할 수 있다.


동적 스케일링 정책
- 목표 트랙킹 스케일링 - 가장 심플, CPU 가 40%를 유지하면 좋겠다 등
- 간단/ 단계 스케일링 - 70%를 넘었을때 생성 등
- 스케쥴 액션 - 예정된 시간에 목표 스케쥴 생성

매트릭스를 사용할 수 있음. 
CPU Utilization: Average CPU
requestCountPerTarget
Average Network In\Out
+ cloud watch 에서 새로운거 생성 가능

스케일링 쿨다운
- 기본 300초 설정
- cooldown 과정 중에는 인스턴스가 죽지않음
- 기본 설정된 값을 추천함